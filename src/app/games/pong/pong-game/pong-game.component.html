<div class="game-container">
  @if (game) {
    <div class="game-opponents">
      <div class="game-opponent">{{ game.player1.displayName }}</div>
      <div class="game-opponent">
        {{ game.player2?.displayName ?? "Ordinateur" }}
      </div>
    </div>
  }
  <div class="game-canvas-container">
    <canvas
      class="game-canvas"
      #gameCanvas
      [width]="canvasWidth"
      [height]="canvasHeight"
    ></canvas>
    @if (game && !game.isFinished && gameStarted && !game.isPaused) {
      <div
        class="drag-zone"
        [class.dragging]="isDragging"
        [style.top.px]="dragZoneTop"
        [style.left.px]="dragZoneLeft"
        [style.width.px]="dragZoneWidth"
        [style.height.px]="dragZoneHeight"
        (mousedown)="onDragStart($event)"
        (touchstart)="onDragStart($event)"
      ></div>
    }
  </div>
  <div class="game-actions">
    @if (game && !game.isFinished) {
      @if (gameStarted) {
        @if (game.isPaused) {
          <button matButton="filled" (click)="pauseGame()">Reprendre la partie</button>
        } @else {
          <button matButton="filled" class="btn-error" (click)="pauseGame()">Pause</button>
        }
      } @else if (game && !game.isFinished) {
        <button matButton="filled" (click)="startGame()">DÃ©marrer la partie</button>
      }
    } @else if (game && game.isFinished) {
      <button matButton="filled" routerLink="/games/pong">Nouvelle partie</button>
    }
  </div>
</div>
